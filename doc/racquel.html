<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>Racquel: An Object/Relational Mapper for Racket</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Racquel:<span class="mywbr"> &nbsp;</span> An Object/<span class="mywbr"> &nbsp;</span>Relational Mapper for Racket</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._dataclass%29" class="tocviewlink" data-pltdoc="x">Data Class Mapping</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._generation%29" class="tocviewlink" data-pltdoc="x">Automated Data Class Generation</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._persistence%29" class="tocviewlink" data-pltdoc="x">Data Object Persistence</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._rql%29" class="tocviewlink" data-pltdoc="x">RQL:<span class="mywbr"> &nbsp;</span> The Racquel Query Language</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._serialization%29" class="tocviewlink" data-pltdoc="x">Data Object Serialization</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._dataclass)" class="tocsubseclink" data-pltdoc="x">Data Class Mapping</a></td></tr><tr><td><a href="#(form._((lib._racquel/main..rkt)._data-class*))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>class*</span></span></a></td></tr><tr><td><a href="#(form._((lib._racquel/main..rkt)._data-class))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>class</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._data-class~3f))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>class?</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._data-class-info))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>class-<wbr></wbr>info</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._generation)" class="tocsubseclink" data-pltdoc="x">Automated Data Class Generation</a></td></tr><tr><td><a href="#(form._((lib._racquel/main..rkt)._gen-data-class))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">gen-<wbr></wbr>data-<wbr></wbr>class</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._table-name-normalizer))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">table-<wbr></wbr>name-<wbr></wbr>normalizer</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._column-name-normalizer))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">column-<wbr></wbr>name-<wbr></wbr>normalizer</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._join-name-normalizer))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">join-<wbr></wbr>name-<wbr></wbr>normalizer</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._table-name-externalizer))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">table-<wbr></wbr>name-<wbr></wbr>externalizer</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._set-odbc-dbsystem-type!))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">set-<wbr></wbr>odbc-<wbr></wbr>dbsystem-<wbr></wbr>type!</span></span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#(part._persistence)" class="tocsubseclink" data-pltdoc="x">Data Object Persistence</a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._make-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">make-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._save-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">save-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._insert-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">insert-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._update-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">update-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._delete-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">delete-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._select-data-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">select-<wbr></wbr>data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._select-data-objects))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">select-<wbr></wbr>data-<wbr></wbr>objects</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._data-object-state))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>object-<wbr></wbr>state</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._get-column))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">get-<wbr></wbr>column</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._set-column!))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">set-<wbr></wbr>column!</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._get-join))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">get-<wbr></wbr>join</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#(part._rql)" class="tocsubseclink" data-pltdoc="x">RQL:<span class="mywbr"> &nbsp;</span> The Racquel Query Language</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#(part._syntax)" class="tocsubseclink" data-pltdoc="x">Syntax forms</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#(part._where)" class="tocsubseclink" data-pltdoc="x">The where clause</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#(part._join)" class="tocsubseclink" data-pltdoc="x">The join clause</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#(part._examples)" class="tocsubseclink" data-pltdoc="x">RQL examples</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#(part._tips)" class="tocsubseclink" data-pltdoc="x">Tips and suggestions</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#(part._serialization)" class="tocsubseclink" data-pltdoc="x">Data Object Serialization</a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._data-object-~3ejsexpr))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>object-<wbr></wbr>&gt;jsexpr</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._jsexpr-~3edata-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">jsexpr-<wbr></wbr>&gt;data-<wbr></wbr>object</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._data-object-~3exexpr))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">data-<wbr></wbr>object-<wbr></wbr>&gt;xexpr</span></span></a></td></tr><tr><td><a href="#(def._((lib._racquel/main..rkt)._xexpr-~3edata-object))" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: racquel"><span class="RktSym">xexpr-<wbr></wbr>&gt;data-<wbr></wbr>object</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Racquel__.An_.Object_.Relational_.Mapper_for_.Racket)"></a><a name="(mod-path._racquel)"></a>Racquel: An Object/Relational Mapper for Racket</h2><p>Racquel is an object/relational mapper for Racket. It consists of several components.</p><ul><li><p>An extension of Racket&rsquo;s class system that allows mapping of database tables to classes.</p></li><li><p>A generator that automatically creates mapped classes using database schema, including joins.</p></li><li><p>Persistence functions for selecting, saving, and deleting objects in the database.</p></li><li><p>An S-expression based SQL-like query language.</p></li><li><p>Functions for serializing objects to and from JSON or XML.</p></li></ul><p>Racquel supports connectivity to all the database systems provided by Racket&rsquo;s <a href="http://docs.racket-lang.org/db/">DB</a>
package, which are: MySQL, PostgreSQL, SQLite3, and through ODBC: SQL Server, Oracle, and DB/2.</p><p>Racquel can be used by downloading and installing the package from <a href="http://planet.racket-lang.org/">PLaneT</a>.</p><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">racquel</span></a><span class="RktPn">)</span></td></tr></table></p><h3>1<tt>&nbsp;</tt><a name="(part._dataclass)"></a>Data Class Mapping</h3><p>Mapping of Racket classes to database tables is performed using <span class="RktSym">data-class</span>, which extends a Racket <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._class%29%29" class="RktStxLink" data-pltdoc="x">class</a></span> with
expressions for mapping a database table and columns to the data class. Below is an example of a <span class="RktSym">data-class</span> with mapping
expressions.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicle%</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">data-class</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28def._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._object~25%29%29" class="RktValLink" data-pltdoc="x">object%</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktVal">"Vehicle"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vehicle-id</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Vehicle_Id"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Make"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">year</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">"Year"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">axels</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Axels"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">primary-key</span><span class="hspace">&nbsp;</span><span class="RktSym">vehicle-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">join</span><span class="hspace">&nbsp;</span><span class="RktSym">owner</span><span class="hspace">&nbsp;</span><span class="RktSym">customer%</span><span class="hspace">&nbsp;</span><span class="RktPn">#:cardinality</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">one-to-one</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">customer%</span><span class="hspace">&nbsp;</span><span class="RktSym">customer-id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vehicle%</span><span class="hspace">&nbsp;</span><span class="RktSym">customer-id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._define%2Fpublic%29%29" class="RktStxLink" data-pltdoc="x">define/public</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wheels</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/ivaraccess.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._get-field%29%29" class="RktStxLink" data-pltdoc="x">get-field</a></span><span class="hspace">&nbsp;</span><span class="RktSym">axels</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._this%29%29" class="RktStxLink" data-pltdoc="x">this</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/objcreation.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._super-new%29%29" class="RktStxLink" data-pltdoc="x">super-new</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Here a database table named "Vehicle" is mapped to the <span class="RktSym">vehicle%</span> data class. Columns are defined mapping the columns
of the table to a field of the data class, as well as default value for the field. There is also an expression which defines the
primary key. This table also has a join field <span class="RktSym">owner</span> which defines a one-to-one join to a <span class="RktSym">customer%</span> object.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._racquel/main..rkt)._data-class*))"></a><span title="Provided from: racquel"><span class="RktSym">data-class*</span></span><span class="hspace">&nbsp;</span><span class="RktVar">superclass-expr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">interface-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-class-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">data-class-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktVar">external-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">init-column</span><span class="hspace">&nbsp;</span><span class="RktVar">column-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span><span class="RktVar">column-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">join</span><span class="hspace">&nbsp;</span><span class="RktVar">join-table-id</span><span class="hspace">&nbsp;</span><span class="RktVar">join-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">primary-key</span><span class="hspace">&nbsp;</span><span class="RktVar">primary-key-decl</span><span class="hspace">&nbsp;</span><span class="RktVar">auto-increment-kw</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">class-clause</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">init-column-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name-decl</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">default-value-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name-decl</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">column-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">default-value-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-renamed</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">internal-id</span><span class="hspace">&nbsp;</span><span class="RktVar">external-id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">column-name-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">column-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">column-name</span><span class="hspace">&nbsp;</span><span class="RktVar">external-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">join-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">join-name</span><span class="hspace">&nbsp;</span><span class="RktVar">joined-table-id</span><span class="hspace">&nbsp;</span><span class="RktVar">cardinality-kw</span><span class="hspace">&nbsp;</span><span class="RktVar">where-clause</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">cardinality-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:cardinality</span><span class="hspace">&nbsp;</span><span class="RktVar">cardinality-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">primary-key-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">column-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">column-ids</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">auto-increment-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:auto-increment</span><span class="hspace">&nbsp;</span><span class="RktVar">auto-increment-expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Produces a data class value used for persisting data objects from a database.</div></p><p>The <span class="RktSym">table-name</span> expression is a string that names the database table that the data class is mapped to. An
optional external class name can also be defined. This external name is used when the class is exported
to JSON or XML using the Racquel data class mixins.</p><p>The <span class="RktSym">column</span> and <span class="RktSym">init-column</span> are analogous to class <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._field%29%29" class="RktStxLink" data-pltdoc="x">field</a></span> and <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._init-field%29%29" class="RktStxLink" data-pltdoc="x">init-field</a></span>
expressions. The difference being that columns are mapped to columns of a database and are persistent. A data class
may also contain <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._field%29%29" class="RktStxLink" data-pltdoc="x">field</a></span> columns, but the fields, as they are not mapped to database columns are not persisted.</p><p>Data classes can map joins to other data classes, using a <span class="RktSym">join</span> expression so that objects related to
the object can be contained as part of the object.  For example a join can be defined so that a field of the object
can contain a list of order for a customer. The path of a the join is defined using an RQL expression (see <a href="#%28part._rql%29" data-pltdoc="x">RQL: The Racquel Query Language</a>)
which allows for considerable flexibility in regard to what the contained objects are, e.g. a join could be defined so that
only customer order in the last six months are contained in the object. The cardinality of the join is also definable using a
keyword. Valid values for the cardinality keyword are <span class="RktVal">'</span><span class="RktVal">one-to-one</span> and <span class="RktVal">'</span><span class="RktVal">one-to-many</span>.</p><p>Joined objects are loaded lazily, that is, they are not loaded from the database until they are first referenced.</p><p>The <span class="RktSym">primary-key</span> expression defines the primary key for the mapped table. If a primary key consists of multiple parts
then the columns must be defined in a list. An optional keyword <span class="RktPn">#:auto-increment</span> can be used to indicate that the
primary key is an auto-incrementing a.k.a. identity column. Typically the value for this keyword is simply <span class="RktVal">#t</span>,
however if the type of database being mapped to is PostgreSQL or Oracle, then the value of the keyword must be a string
defining the name of the sequence entity being used for the table.</p><p>A <span class="RktSym">data-class</span> automatically defines a <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._inspect%29%29" class="RktStxLink" data-pltdoc="x">inspect</a></span> with a value of <span class="RktVal">#f</span>, as class transparancy
is necessary for persistent mechanism. Therefore defining an <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._inspect%29%29" class="RktStxLink" data-pltdoc="x">inspect</a></span> expression will generate an error that
an <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._inspect%29%29" class="RktStxLink" data-pltdoc="x">inspect</a></span> expression has already been defined.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._racquel/main..rkt)._data-class))"></a><span title="Provided from: racquel"><span class="RktSym">data-class</span></span><span class="hspace">&nbsp;</span><span class="RktVar">superclass-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">class-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This is analagous to the <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._class%29%29" class="RktStxLink" data-pltdoc="x">class</a></span> definition, where the interface expression is omitted.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-class~3f))"></a><span title="Provided from: racquel"><span class="RktSym">data-class?</span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a dtata class, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-class-info))"></a><span title="Provided from: racquel"><span class="RktSym">data-class-info</span></span><span class="hspace">&nbsp;</span><span class="RktVar">class</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28def._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._member-name-key~3f%29%29" class="RktValLink" data-pltdoc="x">member-name-key?</a></span></td></tr><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28def._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._member-name-key~3f%29%29" class="RktValLink" data-pltdoc="x">member-name-key?</a></span></td></tr><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">class</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-class?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns eight values, analogous to the returnvalues of <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/objectutils.html#%28def._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._class-info%29%29" class="RktValLink" data-pltdoc="x">class-info</a></span>:</div></p><ul><li><p><span class="RktVar">class-id-key</span>: the hidden name for the class&rsquo;s metadata id field;</p></li><li><p><span class="RktVar">state-key</span>: the hidden name for the class&rsquo;s state field;</p></li><li><p><span class="RktVar">table-name</span>: the database table name for the class;</p></li><li><p><span class="RktVar">columns</span>: a list of column definition lists. Each column defintion
consists of the column field, the database column name, and the external name used for serialization;</p></li><li><p><span class="RktVar">joins</span>: a list of join definition lists. Each join definition
consists of the join field, the data class of the object(s) joined to,
the cardinality (either <span class="RktVal">'</span><span class="RktVal">one-to-one</span> or <span class="RktVal">'</span><span class="RktVal">one-to-many</span>, and the RQL where-clause for the join;</p></li><li><p><span class="RktVar">primary-key</span>: either an field or a list of fields that constitute the primary key;</p></li><li><p><span class="RktVar">autoincrement-key</span>: set to <span class="RktVal">#t</span> if the primary key is an auto-increment key
 (unless the database system is PostgreSQL or Oracle, in which case it is the name of the sequence used
 for the primary key);</p></li><li><p><span class="RktVar">external-name</span>: the external name used for JSON/XML serialization;</p></li></ul><h3>2<tt>&nbsp;</tt><a name="(part._generation)"></a>Automated Data Class Generation</h3><p>A powerful feature of Racquel is the ability to generate <span class="RktSym">data-class</span> mappings automatically using
database schema metadata. This allows for data classes to be defined for all the tables in
a database without the tedious effort of manually coding the mappings.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._racquel/main..rkt)._gen-data-class))"></a><span title="Provided from: racquel"><span class="RktSym">gen-data-class</span></span><span class="hspace">&nbsp;</span><span class="RktVar">db-connection</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">table-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:db-system-type</span><span class="hspace">&nbsp;</span><span class="RktVar">db-system-type-kw</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:generate-joins?</span><span class="hspace">&nbsp;</span><span class="RktVar">generate-joins-kw</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:generate-reverse-joins?</span><span class="hspace">&nbsp;</span><span class="RktVar">generate-reverse-joins-kw</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:schema-name</span><span class="hspace">&nbsp;</span><span class="RktVar">schema-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:inherits</span><span class="hspace">&nbsp;</span><span class="RktVar">base-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:table-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:column-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:join-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:table-name-externalizer</span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:print?</span><span class="hspace">&nbsp;</span><span class="RktVar">print-kw</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">data-class-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">db-system-type-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:db-system-type</span><span class="hspace">&nbsp;</span><span class="RktVar">db-system-type</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">generate-joins-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:generate-joins?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">generate-reverse-joins-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:generate-reverse-joins?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">schema-name-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:schema-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">inherits-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:inherits</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">table-name-normalizer-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:table-name-normalizer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">column-name-normalizer-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:column-name-normalizer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">join-name-normalizer-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:join-name-normalizer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">table-name-externalizer-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:table-name-externalizer</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">print-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:print?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">or/c</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Generates a data class from the specified <span class="RktSym">table-name</span> using the <span class="RktVar">db-connection</span>. If the database system type is an ODBC connection, then
the particular system type can be specified using the <span class="RktPn">#:db-system-type</span> keyword. (This is not necessary if the database system type has
already been defined by calling <span class="RktSym">set-odbc-dbsystem-type!</span>. If the <span class="RktPn">#:db-system-type</span> is not
specified, then the database system type is determined from the <span class="RktSym">dbsystem-name</span> of the
<span class="RktVar">db-connection</span>, where the <span class="RktVal">'</span><span class="RktVal">odbc</span> database system is aassumed to be SQL Server.</div></p><p>The <span class="RktSym">generate-joins?</span> and <span class="RktSym">generate-reverse-joins</span> keywords control the
automatic generation of joins and reverse joins. Joins are determined based on foreign key constraints
in the database, and reverse joins are based on any foreign key contraints referencing it. By default
joins are generated, but reverse joins are not.</p><p>In some cases, the table name may not be unique in the database server&rsquo;s metadata. In those cases, the
<span class="RktVar">schema-name</span> can be used to specify the schema that the table resides in.</p><p>The base class of the generated data class can be specified using the <span class="RktPn">#:inherits</span> keyword. The
default base-class is <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/createclass.html#%28def._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._object~25%29%29" class="RktValLink" data-pltdoc="x">object%</a></span>.</p><p>Behavior of the map generation can be controlled by customizing the normalizer procedures which normalize
database names into Racket symbols. Generation of external names from the symbol can also be controlled
using the externalizer procedures. A normalizer or externalizer can be customized by specifying the
procedure to use with the appropriate keyword. An example of a situation where one would want to override
the default normalizers is if table names in a database started with a prefix.</p><p>Below are the default normalizers and externalizers.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._table-name-normalizer))"></a><span title="Provided from: racquel"><span class="RktSym">table-name-normalizer</span></span><span class="hspace">&nbsp;</span><span class="RktVar">table-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This normalizer converts database table names into Racket class names, using a set of rules. First,
the normalizer will convert mixed-case names, e.g. "MixedCase", and make the all lower-case with hyphens
between the names, e.g. "mixed-case". It will then convert any underscores to hyphens. Finally, it will
append a percent sign to the end of the name, since that is the Racket standard for naming classes.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVal">"ExampleTable_Name"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">example-table-name%</span></td></tr></table></blockquote><p>This is default normalizer for table names if the <span class="RktPn">#:table-name-externalizer</span> keyword is not specified.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._column-name-normalizer))"></a><span title="Provided from: racquel"><span class="RktSym">column-name-normalizer</span></span><span class="hspace">&nbsp;</span><span class="RktVar">table-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This converts column names of a table into Racket symbols, following a set of rules. The
rules are similar to those for the <span class="RktSym">table-name-normalizer</span>. First mixed-case names are converted to
lower-case with hyphens, then underscores are converted to hyphens.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">column-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVal">"ExampleColumn_Name"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">example-column-name</span></td></tr></table></blockquote><p>This is default normalizer for table names if the <span class="RktPn">#:column-name-externalizer</span> keyword is not specified.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._join-name-normalizer))"></a><span title="Provided from: racquel"><span class="RktSym">join-name-normalizer</span></span><span class="hspace">&nbsp;</span><span class="RktVar">table-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">This converts joined table names into Racket symbols, following a set of rules. The
rules are similar to those for the <span class="RktSym">column-name-normalizer</span>. First mixed-case names are converted to
lower-case with hyphens, then underscores are converted to hyphens. Also, if the cardinality of the join is
<span class="RktVal">'</span><span class="RktVal">one-to-many</span>, an "s" is appended to the end of the name (or "es" if the name ends with an "s".)</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">join-name-normalizer</span><span class="hspace">&nbsp;</span><span class="RktVal">"JoinExample_Address"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">join-example-addresses</span></td></tr></table></blockquote><p>This is default normalizer for table names if the <span class="RktPn">#:join-name-externalizer</span> keyword is not specified.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._table-name-externalizer))"></a><span title="Provided from: racquel"><span class="RktSym">table-name-externalizer</span></span><span class="hspace">&nbsp;</span><span class="RktVar">table-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Converts a database table name to an external name for JSON or XML serialization. The default is no change at all to the table name.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._set-odbc-dbsystem-type!))"></a><span title="Provided from: racquel"><span class="RktSym">set-odbc-dbsystem-type!</span></span><span class="hspace">&nbsp;</span><span class="RktVar">odbc-sys-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">odbc-sys-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">sqlserver</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">oracle</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">db2</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">If the database system being used is either Oracle or DB/2, then the database system type needs to be set to distinquish the ODBC
connection from a SQL Server connection, which is assumed for an ODBC connection is it is not sepcified using this procedure.</div></p><h3>3<tt>&nbsp;</tt><a name="(part._persistence)"></a>Data Object Persistence</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._make-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">make-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-class</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">primary-key</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">data-object?</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-class</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-class?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">primary-key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">of</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/stxops.html#%28def._%28%28lib._racket%2Fprivate%2Fstx..rkt%29._identifier~3f%29%29" class="RktValLink" data-pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Loads a data object from the database by primary key.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._save-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">save-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-object</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Saves a data object into the database connected to. This will either insert this object into the database, if the object&rsquo;s state is <span class="RktVal">'</span><span class="RktVal">new</span> or
update if the object has been previously loaded. The object&rsquo;s state will be changed to <span class="RktVal">'</span><span class="RktVal">saved</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._insert-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">insert-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-object</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Inserts a data object into the database connected to. The object&rsquo;s state will be changed to <span class="RktVal">'</span><span class="RktVal">saved</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._update-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">update-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-object</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Updates a data object into the database connected to. The object&rsquo;s state will be changed to <span class="RktVal">'</span><span class="RktVal">saved</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._delete-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">delete-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-object</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Deletes a data object from the connected database. The object&rsquo;s state will be changed to <span class="RktVal">'</span><span class="RktVal">deleted</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._select-data-object))"></a><span title="Provided from: racquel"><span class="RktSym">select-data-object</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-class</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">join-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">where-clause</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rest</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym">data-object?</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-class</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-class?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">join-clause</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">where-clause</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rest</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Loads a data object from the database connected to using the criteria defined by the where and/or
join RQL clauses. The object&rsquo;s initial state will be <span class="RktVal">'</span><span class="RktVal">loaded</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._select-data-objects))"></a><span title="Provided from: racquel"><span class="RktSym">select-data-objects</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">db-connection</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">data-class</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">join-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">where-clause</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">rest</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">db-connection</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">connection?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-class</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-class?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">join-clause</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">where-clause</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rest</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Loads data objects from the database connected to using the criteria defined by the where and/or
join RQL clauses. Each object&rsquo;s initial state will be <span class="RktVal">'</span><span class="RktVal">loaded</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-object-state))"></a><span title="Provided from: racquel"><span class="RktSym">data-object-state</span></span><span class="hspace">&nbsp;</span><span class="RktVar">data-object</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">new</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">loaded</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">saved</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">deleted</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current state of the data object.</div></p><ul><li><p><span class="RktVal">'</span><span class="RktVal">new</span>: the state of a data object that has been created but never stored in the database;</p></li><li><p><span class="RktVal">'</span><span class="RktVal">loaded</span>: the state of a data object that has been loaded from the database;</p></li><li><p><span class="RktVal">'</span><span class="RktVal">saved</span>: the state of a data object that has been saved to the database after being
 either newly created or loaded from the database;</p></li><li><p><span class="RktVal">'</span><span class="RktVal">deleted</span>: the state of a data object that has been deleted from the database;</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._get-column))"></a><span title="Provided from: racquel"><span class="RktSym">get-column</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">data-object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Gets the value of a data object&rsquo;s column, analogous to <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/ivaraccess.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._get-field%29%29" class="RktStxLink" data-pltdoc="x">get-field</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._set-column!))"></a><span title="Provided from: racquel"><span class="RktSym">set-column!</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sets the value of a data object&rsquo;s column, analogous to <span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/ivaraccess.html#%28form._%28%28lib._racket%2Fprivate%2Fclass-internal..rkt%29._set-field%21%29%29" class="RktStxLink" data-pltdoc="x">set-field!</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._get-join))"></a><span title="Provided from: racquel"><span class="RktSym">get-join</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">data-object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///Applications/Developer/Racket%20v5.3.6/doc/reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Gets the value of a data object join. The value of thie join field is loaded from the database upon
first call. (This is known as "lazy" loading.)</div></p><h3>4<tt>&nbsp;</tt><a name="(part._rql)"></a>RQL: The Racquel Query Language</h3><p>The RQL query language defines SQL-like S-expressions. The expressions are used to define
selection criteria when loading data objects (using <span class="RktSym">select-data-object</span> or <span class="RktSym">select-data-objects</span>)
or joining to other data objects (using <span class="RktSym">join</span>s). RQL-expressions are translated into database system-specific SQL.</p><p>Rather than naming a table in a query, as in an SQL, a class which maps to a table is named instead. For instance if the
table "INVOICE" was mapped to the class <span class="RktSym">invoice%</span>, the name <span class="RktSym">invoice%</span> would be using the an RQL query. In
addition, columns in RQL as identified using a pair with class name and field name. This the SQL table-column
reference "INVOICE.CREATED" would be <span class="RktPn">(</span><span class="RktSym">invoice%</span><span class="stt"> </span><span class="RktSym">created</span><span class="RktPn">)</span>. A column name must be defined in RQL with it&rsquo;s corresponding
class, in order to be correctly mapped to the corresponding SQL.</p><p>RQL query parameters are represented using a question mark (<span class="RktSym">?</span>). Since the representation of parameter values can
be database system specific, it is recommended that parameters be used rather than actual hard-coded values, as to ensure correct
mapping of the value into the specific database system&rsquo;s format.</p><h4>4.1<tt>&nbsp;</tt><a name="(part._syntax)"></a>Syntax forms</h4><p>Below is the BNF for RQL expressions.</p><p><table cellspacing="0"><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">expression</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">join</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">table name</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">search condition</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">where</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">search condition</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">search condition</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean term</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">or</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">search condition</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">boolean term</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean term</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean factor</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">and</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">boolean term</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">boolean factor</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean factor</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">not</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">boolean test</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean test</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean primary</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">boolean primary</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">search condition</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">predicate</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">comparison predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">between predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">in predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">like predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p> </p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span>|<span class="hspace">&nbsp;</span><span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">null predicate</span>&#8250;</p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">between predicate</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">between</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">row value constructor</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">row value constructor</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">row value constructor</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">in predicate</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">in</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">row value constructor</span>&#8250;<span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">in value list</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">in value list</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">value expression</span>&#8250;<span style="vertical-align: super; font-size: 80%">+</span></p></td></tr><tr><td valign="baseline"><p><span class="hspace">&nbsp;</span></p></td><td valign="baseline"><p>&#8249;<span style="font-style: italic">like predicate</span>&#8250;</p></td><td valign="baseline"><p><span class="stt"><span class="hspace">&nbsp;</span>::=<span class="hspace">&nbsp;</span></span></p></td><td valign="baseline"><p><span class="RktInBG"><span class="hspace"></span><span class="RktIn">(</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">like</span><span class="hspace"></span></span><span class="hspace">&nbsp;</span>&#8249;<span style="font-style: italic">pattern</span>&#8250;<span class="hspace">&nbsp;</span><span class="RktInBG"><span class="hspace"></span><span class="RktIn">)</span><span class="hspace"></span></span></p></td></tr></table></p><h4>4.2<tt>&nbsp;</tt><a name="(part._where)"></a>The where clause</h4><p>A <span class="RktSym">where</span> clause is used in <span class="RktSym">select-data-object</span> and <span class="RktSym">select-data-objects</span>. It follows the
behavior of SQL-expressions, which can include AND, OR, =, IN, LIKE, etc., but are expressed as S-expressions. Thus the
SQL-expression "ID = 1" would be coded as the S-expression "(= ID 1)".</p><p>Currently only a subset of SQL is supported. Subqueries and existence functions are not supported.</p><h4>4.3<tt>&nbsp;</tt><a name="(part._join)"></a>The join clause</h4><p>Join clauses can also included in <span class="RktSym">select-data-object</span> and <span class="RktSym">select-data-objects</span> functions. The <span class="RktSym">join</span>
clauses must be defined before the <span class="RktSym">where</span> clause. There may be any number of join clauses, each expressing a
join relationship, similar to an SQL join clause.</p><p>A <span class="RktSym">join</span> clause may also be defined in a <span class="RktSym">data-class</span> declaration, but is expressed in a slightly different
form (see <span class="RktSym">data-class*</span> above. For instance, the <span class="RktSym">join</span> clause, expresses the equivalant of the SQL-expression
"JOIN PERSON ON PERSON.ID = ADDRESS.PERSON_ID".</p><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">(join person% (= (person% id) (address% person-id)))</span></span></p></td></tr></table></p><h4>4.4<tt>&nbsp;</tt><a name="(part._examples)"></a>RQL examples</h4><p><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">(select-data-objects con address% #:print? #t (where (in id ,address-ids))</span></span></p></td></tr></table></p><h4>4.5<tt>&nbsp;</tt><a name="(part._tips)"></a>Tips and suggestions</h4><h3>5<tt>&nbsp;</tt><a name="(part._serialization)"></a>Data Object Serialization</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-object-~3ejsexpr))"></a><span title="Provided from: racquel"><span class="RktSym">data-object-&gt;jsexpr</span></span><span class="hspace">&nbsp;</span><span class="RktVar">object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">jsexpr?</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Serializes a data object into a JS-expression.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._jsexpr-~3edata-object))"></a><span title="Provided from: racquel"><span class="RktSym">jsexpr-&gt;data-object</span></span><span class="hspace">&nbsp;</span><span class="RktVar">jsx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">data-object?</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">jsx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">jsexpr?</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a data object from a JS-expression string.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-object-~3exexpr))"></a><span title="Provided from: racquel"><span class="RktSym">data-object-&gt;xexpr</span></span><span class="hspace">&nbsp;</span><span class="RktVar">object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">xexpr?</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-object?</span></td></tr></table></blockquote></div><div class="SIntrapara">Serializes a data object into an X-expression.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._xexpr-~3edata-object))"></a><span title="Provided from: racquel"><span class="RktSym">xexpr-&gt;data-object</span></span><span class="hspace">&nbsp;</span><span class="RktVar">xml</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">data-object?</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">xml</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">xexpr?</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a data object from an X-expression.</div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>