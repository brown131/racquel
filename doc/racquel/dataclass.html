<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>1&nbsp;Data Class Mapping</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Racquel:<span class="mywbr"> &nbsp;</span> An Object/<span class="mywbr"> &nbsp;</span>Relational Mapper for Racket</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Data Class Mapping</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="generation.html" class="tocviewlink" data-pltdoc="x">Automated Data Class Generation</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="persistence.html" class="tocviewlink" data-pltdoc="x">Data Object Persistence</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="rql.html" class="tocviewlink" data-pltdoc="x">RQL:<span class="mywbr"> &nbsp;</span> The Racquel Query Language</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="serialization.html" class="tocviewlink" data-pltdoc="x">Data Object Serialization</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28form._%28%28lib._racquel%2Fmain..rkt%29._data-class%2A%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">data-<wbr></wbr>class*</span></a></td></tr><tr><td><a href="#%28form._%28%28lib._racquel%2Fmain..rkt%29._data-class%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">data-<wbr></wbr>class</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._racquel%2Fmain..rkt%29._data-class~3f%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">data-<wbr></wbr>class?</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._racquel%2Fmain..rkt%29._data-class-info%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym">data-<wbr></wbr>class-<wbr></wbr>info</span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Racquel: An Object/Relational Mapper for Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Racquel: An Object/Relational Mapper for Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="generation.html" title="forward to &quot;2 Automated Data Class Generation&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>1<tt>&nbsp;</tt><a name="(part._dataclass)"></a>Data Class Mapping</h3><p>Mapping of Racket classes to database tables is performed using <span class="RktSym">data-class</span>, which extends a
Racket <span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span> with expressions for mapping a database table and columns to the data class.
Below is an example of a <span class="RktSym">data-class</span> with mapping expressions.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">vehicle%</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">data-class</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">object%</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktVal">"Vehicle"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vehicle-id</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Vehicle_Id"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">"Make"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">year</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">"Year"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">axels</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">"Axels"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">primary-key</span><span class="hspace">&nbsp;</span><span class="RktSym">vehicle-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">join</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">owner</span><span class="hspace">&nbsp;</span><span class="RktSym">customer%</span><span class="hspace">&nbsp;</span><span class="RktPn">#:cardinality</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">one-to-one</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">=</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">customer%</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vehicle%</span><span class="hspace">&nbsp;</span><span class="RktSym">customer-id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define/public</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wheels</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">*</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">get-column</span><span class="hspace">&nbsp;</span><span class="RktSym">axels</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">this</span></span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">super-new</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Here a database table named "Vehicle" is mapped to the <span class="RktSym">vehicle%</span> data class. Columns are
defined mapping the columns of the table to a field of the data class, as well as default value for
the field. There is also an expression which defines the primary key. This table also has a join
field <span class="RktSym">owner</span> which defines a one-to-one join to a <span class="RktSym">customer%</span> object.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._racquel/main..rkt)._data-class*))"></a><span title="Provided from: racquel | Package: racquel"><span class="RktSym"><span class="RktSymDef RktSym">data-class*</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">superclass-expr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">interface-expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data-class-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">data-class-clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktSym">table-name</span><span class="hspace">&nbsp;</span><span class="RktVar">external-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">init-column</span><span class="hspace">&nbsp;</span><span class="RktVar">column-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">column</span><span class="hspace">&nbsp;</span><span class="RktVar">column-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">join</span><span class="hspace">&nbsp;</span><span class="RktVar">join-table-id</span><span class="hspace">&nbsp;</span><span class="RktVar">join-decl</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">primary-key</span><span class="hspace">&nbsp;</span><span class="RktVar">primary-key-decl</span><span class="hspace">&nbsp;</span><span class="RktVar">auto-increment-kw</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">class-clause</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">init-column-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name-decl</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">default-value-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name-decl</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">column-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">maybe-renamed</span><span class="hspace">&nbsp;</span><span class="RktVar">default-value-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">column-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-renamed</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">internal-id</span><span class="hspace">&nbsp;</span><span class="RktVar">external-id</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">column-name-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">column-name</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">column-name</span><span class="hspace">&nbsp;</span><span class="RktVar">external-name</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">join-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">join-name</span><span class="hspace">&nbsp;</span><span class="RktVar">joined-table-id</span><span class="hspace">&nbsp;</span><span class="RktVar">cardinality-kw</span><span class="hspace">&nbsp;</span><span class="RktVar">where-clause</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">cardinality-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:cardinality</span><span class="hspace">&nbsp;</span><span class="RktVar">cardinality-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">primary-key-decl</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">column-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">column-ids</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">auto-increment-kw</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:autoincrement</span><span class="hspace">&nbsp;</span><span class="RktVar">auto-increment-expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Produces a data class value used for persisting data objects from a database.</div></p><p>The <span class="RktSym">table-name</span> expression is a string that names the database table that the data class is
mapped to. An optional external class name can also be defined. This external name is used when the
class is exported to JSON or XML using the Racquel data class mixins.</p><p>The <span class="RktSym">column</span> and <span class="RktSym">init-column</span> are analogous to class <span class="RktSym"><span class="badlink"><span class="RktValLink">field</span></span></span> and
<span class="RktSym"><span class="badlink"><span class="RktValLink">init-field</span></span></span> expressions. The difference being that columns are mapped to columns of a
database and are persistent. A data class may also contain <span class="RktSym"><span class="badlink"><span class="RktValLink">field</span></span></span> columns, but the fields,
as they are not mapped to database columns are not persisted.</p><p>Data classes can map joins to other data classes, using a <span class="RktSym">join</span> expression so that objects
related to the object can be contained as part of the object.  For example a join can be defined so
that a field of the object can contain a list of order for a customer. The path of a join is defined
using an RQL expression (see <a href="rql.html" data-pltdoc="x">RQL: The Racquel Query Language</a>) which allows for considerable flexibility in regard to
what the contained objects are, e.g. a join could be defined so that only customer order in the last
six months are contained in the object. The cardinality of the join is also definable using a
keyword. Valid values for the cardinality keyword are <span class="RktVal">'</span><span class="RktVal">one-to-one</span> and <span class="RktVal">'</span><span class="RktVal">one-to-many</span>.</p><p>Joined objects are loaded lazily, that is, they are not loaded from the database until they are
first referenced.</p><p>The <span class="RktSym">primary-key</span> expression defines the primary key for the mapped table. If a primary key
consists of multiple parts then the columns must be defined in a list. An optional keyword
<span class="RktPn">#:autoincrement</span> can be used to indicate that the primary key is an auto-incrementing a.k.a.
identity column. Typically the value for this keyword is simply <span class="RktVal">#t</span>, however if the type of
database being mapped to is PostgreSQL or Oracle, then the value of the keyword must be a string
defining the name of the sequence entity being used for the table.</p><p>A <span class="RktSym">data-class</span> automatically defines a <span class="RktSym"><span class="badlink"><span class="RktValLink">inspect</span></span></span> with a value of <span class="RktVal">#f</span>, as class
transparancy is necessary for persistent mechanism. Therefore defining an <span class="RktSym"><span class="badlink"><span class="RktValLink">inspect</span></span></span>
expression will generate an error that an <span class="RktSym"><span class="badlink"><span class="RktValLink">inspect</span></span></span> expression has already been defined.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._racquel/main..rkt)._data-class))"></a><span title="Provided from: racquel | Package: racquel"><span class="RktSym"><span class="RktSymDef RktSym">data-class</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">superclass-expr</span><span class="hspace">&nbsp;</span><span class="RktVar">class-clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This is analagous to the <span class="RktSym"><span class="badlink"><span class="RktValLink">class</span></span></span> definition, where the interface expression is omitted.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-class~3f))"></a><span title="Provided from: racquel | Package: racquel"><span class="RktSym"><span class="RktSymDef RktSym">data-class?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">boolean?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">any/c</span></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a data class, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._racquel/main..rkt)._data-class-info))"></a><span title="Provided from: racquel | Package: racquel"><span class="RktSym"><span class="RktSymDef RktSym">data-class-info</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">class</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" cellpadding="0"><tr><td><span class="RktSym"><span class="badlink"><span class="RktValLink">member-name-key?</span></span></span></td></tr><tr><td><span class="RktSym"><span class="badlink"><span class="RktValLink">member-name-key?</span></span></span></td></tr><tr><td><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">any/c</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">identifier?</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">class</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">data-class?</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns eight values, analogous to the returnvalues of <span class="RktSym"><span class="badlink"><span class="RktValLink">class-info</span></span></span>:</div></p><ul><li><p><span class="RktVar">class-id-key</span>: the hidden name for the class&rsquo;s metadata id field;</p></li><li><p><span class="RktVar">state-key</span>: the hidden name for the class&rsquo;s state field;</p></li><li><p><span class="RktVar">table-name</span>: the database table name for the class;</p></li><li><p><span class="RktVar">columns</span>: a list of column definition lists. Each column definition consists of the
 column field, the database column name, and the external name used for serialization;</p></li><li><p><span class="RktVar">joins</span>: a list of join definition lists. Each join definition consists of the join
 field, the data class of the object(s) joined to, the cardinality (either
 <span class="RktVal">'</span><span class="RktVal">one-to-one</span> or <span class="RktVal">'</span><span class="RktVal">one-to-many</span>, and the RQL where-clause for the join;</p></li><li><p><span class="RktVar">primary-key</span>: either an field or a list of fields that constitute the primary key;</p></li><li><p><span class="RktVar">autoincrement-key</span>: set to <span class="RktVal">#t</span> if the primary key is an auto-increment key
 (unless the database system is PostgreSQL or Oracle, in which case it is the name of the
 sequence used for the primary key);</p></li><li><p><span class="RktVar">external-name</span>: the external name used for JSON/XML serialization;</p></li></ul><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="index.html" title="backward to &quot;Racquel: An Object/Relational Mapper for Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Racquel: An Object/Relational Mapper for Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="generation.html" title="forward to &quot;2 Automated Data Class Generation&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>